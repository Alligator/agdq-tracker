<html>
  <head>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.7.0/underscore.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <style>
    body {
      font: 10px sans-serif;
    }

    .axis path,
    .axis line {
      fill: none;
      stroke: #ccc;
      shape-rendering: crispEdges;
    }

    .line {
      fill: none;
      stroke-width: 1.5px;
    }

    .overlay {
      fill: none;
      pointer-events: all;
    }

    .focusline {
      stroke-width: 1px;
      fill: none;
      stroke: #ddd;
    }

    #main-chart, #games-chart {
      fill: #999;
      font-size: 12pt;
    }
    </style>
    <link rel="stylesheet" href="stylesheets/layout.css" />
    <title>MARATHON_SHORT_NAME Stats - alligator</title>
  </head>
  <body>
    <div class="title">
      <h1><a href="http://gamesdonequick.com/">MARATHON_NICE_NAME</a> Stats</h1>
    </div>

    <div class="container">

      <div class="section">
        <div class="section-content">
          <h2>Viewers and donations over the whole marathon</h2>
          <div id="main-stats"></div>
          <div id="main-chart"></div>
        </div>
        <div class="section-footer">
          <a href="https://irc.alligatr.co.uk/agdq-comparison">Compare this with previous marathons</a>
        </div>
      </div>

      <div id="per-game" class="section">
        <div class="section-content">
          <h2>Viewers and donations per game</h2>
          <div class="games-list">
            <div id="games"></div>
          </div>

          <div class="games-list-chart">
            <div id="game-stats"></div>
            <div id="games-chart" style="width: 100%; height: 380px;"></div>
          </div>
        </div>
      </div>


      <div class="section info">
        <div class="section-content">
          <h2>Implementation notes</h2>
          <div class="info-column">
            <h3>The data</h3>
            <ul>
              <li>Viewer count is taken from the twitch API.</li>
              <li>Donation total is taken from the <a href="https://gamesdonequick.com/tracker/event/MARATHON_NAME_FULL">tracker</a>.</li>
              <li>Games list is scraped from the <a href="http://gamesdonequick.com/schedule">schedule</a>.</li>
            </ul>
            <p>Any gaps are the result of one of the above three things being down.<p/>
          </div>

          <div class="info-column">
            <h3>The code</h3>
            <p>The &lsquo;backend&rsquo; is a python script run by cron that fetches information and updates a JSON file..</p>
            <p>The frontend is powered by JavaScript, jQuery and d3.js.</p>
            <p>The data for this and previous marathons is available <a href="https://github.com/Alligator/agdq-stats">here</a>.</p>
          </div>
        </div>
      </div>
      <h3 class="footer"><a href="http://alligatr.co.uk">alligator MARATHON_YEAR</a></h3>

    </div>
    <script type="text/javascript" src="agdq.d3.js"></script>
  </body>
</html>

